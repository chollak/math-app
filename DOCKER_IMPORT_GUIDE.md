# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ Docker

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

‚úÖ **–§–∞–π–ª —É–∂–µ –≤–∫–ª—é—á–µ–Ω –≤ –ø—Ä–æ–µ–∫—Ç!**
–§–∞–π–ª `output_clean.json` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `scripts/` –∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª:
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à JSON —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É scripts –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
scp your_file.json user@server:/var/www/math-app/scripts/output_clean.json
```

## üê≥ –ó–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ Docker

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ docker-compose exec (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ (/var/www/math-app)
cd /var/www/math-app

# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose exec math-app node scripts/import-clean-json.js
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ docker exec

```bash
# –ù–∞–π—Ç–∏ ID –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep math-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec -it math-app node scripts/import-clean-json.js
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
# –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
docker-compose run --rm math-app node scripts/import-clean-json.js
```

## üìç –ü—É—Ç–∏ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `/app/database/database.sqlite` (–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `./data/database/`)
- **Uploads**: `/app/database/uploads/` (–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `./data/database/uploads/`)
- **–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª**: `/app/scripts/output_clean.json` ‚úÖ (–≤–∫–ª—é—á–µ–Ω –≤ –∫–æ–¥)
- **–°–∫—Ä–∏–ø—Ç—ã**: `/app/scripts/`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose logs -f math-app
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞:
```bash
# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec math-app sh

# –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É
node -e "
const sqlite3 = require('sqlite3');
const db = new sqlite3.Database('/app/database/database.sqlite');
db.get('SELECT COUNT(*) as count FROM questions', (err, row) => {
  console.log('–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤:', row.count);
  db.close();
});
"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã:
```bash
# –ù–∞ —Ö–æ—Å—Ç–µ
ls -lh data/database/database.sqlite

# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ  
docker-compose exec math-app ls -lh /app/database/database.sqlite
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –≤ `/app/backups/`
2. **–î—É–±–ª–∏–∫–∞—Ç—ã**: –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
3. **–ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `./data/database/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Ö–æ—Å—Ç–µ
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `nodejs` (UID 1001)

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose exec math-app ls -la /app/temp/

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
docker cp temp/output_clean.json math-app:/app/temp/
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞"
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º
docker-compose stop math-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose run --rm math-app node scripts/import-clean-json.js

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
docker-compose start math-app
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞"
```bash
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Ö–æ—Å—Ç–µ
sudo chown -R 1001:1001 data/database/
sudo chmod -R 755 data/database/
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞

```bash
# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f math-app | grep -E "(–∏–º–ø–æ—Ä—Ç|import|error|success)"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats math-app
```